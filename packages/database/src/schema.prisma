generator client {
  provider = "prisma-client"
  output   = "./client"

  engineType = "client"
  runtime    = "nodejs"
}

datasource db {
  provider = "sqlserver"
  url      = env("SQL_CONNECTION_STRING_ADMIN")
}

// NOTES
//
// use '//' comments for notes relevant to the schema
// use '///' comments for notes that should be included in the types definition
// see https://www.prisma.io/docs/concepts/components/prisma-schema#comments
//
// we use GUIDs for IDs (see https://learn.microsoft.com/en-us/sql/t-sql/data-types/uniqueidentifier-transact-sql?view=sql-server-ver16)
// this is because these IDs may be used in URLs and it makes them harder to guess
// while we don't rely on that for security, it adds an extra layer
// not everything needs this, but easier to make them all consistent and the increase in size (vs int) is negligible

/// Questionnaire responses from portal users
model Questionnaire {
  /// Unique identifier for the questionnaire response
  id        String   @id @default(cuid())
  /// Full name of the respondent
  fullName  String
  /// Email address (optional based on user preference)
  email     String?
  /// Overall rating of the service
  rating    String
  /// Detailed feedback about the service
  feedback  String
  /// When the response was submitted
  createdAt DateTime @default(now())
  /// When the response was last updated
  updatedAt DateTime @updatedAt
  /// Soft delete flag for audit trail
  isDeleted Boolean  @default(false)

  @@map("questionnaires")
}
